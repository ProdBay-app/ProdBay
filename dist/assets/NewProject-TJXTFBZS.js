import{d as A,e as C,f as P,r as p,j as e,F,D as I}from"./index-Bj-tmwIw.js";import{s as D}from"./supabase-D_wOUl-A.js";import{B as k,S as B,R as E}from"./railwayApiService-OM36Qiyn.js";import{C as M}from"./calendar-BVjs4xWM.js";import{S as q}from"./send-CRyXVvUJ.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],R=A("map-pin",z),G=()=>{const h=C(),{showSuccess:b,showWarning:j,showError:y}=P(),[s,N]=p.useState({project_name:"",client_name:"",brief_description:"",physical_parameters:"",financial_parameters:0,timeline_deadline:""}),[i,u]=p.useState("static"),[w,x]=p.useState(!1),[n,d]=p.useState("idle"),t=a=>{const{name:l,value:c}=a.target;N(m=>({...m,[l]:l==="financial_parameters"?parseFloat(c)||0:c}))},_=async a=>{var l,c,m,g,f;a.preventDefault(),x(!0),d("creating-project");try{const{data:o,error:v}=await D.from("projects").insert(s).select().single();if(v||!o)throw new Error("Failed to create project");d("processing-brief");const r=await E.processBrief(String(o.id),s.brief_description,{allocationMethod:i,projectContext:{financial_parameters:s.financial_parameters,timeline_deadline:s.timeline_deadline,physical_parameters:s.physical_parameters}});if(!r.success)console.warn("Brief processing failed:",(l=r.error)==null?void 0:l.message),j(`Project created successfully, but brief processing failed: ${(c=r.error)==null?void 0:c.message}. You can manually create assets later.`);else{console.log("Brief processed successfully:",(m=r.data)==null?void 0:m.createdAssets.length,"assets created");const S=(g=r.data)!=null&&g.aiData?` using AI (${Math.round(r.data.aiData.confidence*100)}% confidence)`:"";b(`Project created successfully! ${(f=r.data)==null?void 0:f.createdAssets.length} assets were automatically generated from your brief${S}.`,{duration:8e3})}d("success"),h(`/client/dashboard?project=${o.id}`)}catch(o){console.error("Error creating project:",o),d("error"),y("Failed to create project. Please try again.")}finally{x(!1)}};return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[e.jsx(F,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Project"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Submit your project brief to get started"})]})]}),e.jsxs("form",{onSubmit:_,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"project_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name *"}),e.jsx("input",{type:"text",id:"project_name",name:"project_name",value:s.project_name,onChange:t,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter project name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"client_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Name *"}),e.jsx("input",{type:"text",id:"client_name",name:"client_name",value:s.client_name,onChange:t,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter client name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"brief_description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Brief & Description *"}),e.jsx("textarea",{id:"brief_description",name:"brief_description",value:s.brief_description,onChange:t,required:!0,rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe your event or project in detail. Include requirements for printing, staging, audio, lighting, catering, transport, or design services..."})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(k,{className:"h-6 w-6 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI-Powered Asset Allocation"}),e.jsx(B,{className:"h-5 w-5 text-purple-500"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Enable AI to intelligently analyze your brief and suggest optimal assets with detailed specifications."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Asset Allocation Method:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"allocationMethod",value:"static",checked:i==="static",onChange:a=>u(a.target.value),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Static Allocation"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Rule-based asset identification using keyword matching"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"allocationMethod",value:"ai",checked:i==="ai",onChange:a=>u(a.target.value),className:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"AI-Powered Allocation"}),e.jsx("p",{className:"text-xs text-gray-500",children:"AI analyzes your brief to identify assets with detailed specifications"})]})]})]}),i==="ai"&&e.jsx("div",{className:"mt-3 p-3 bg-purple-100 rounded-lg",children:e.jsx("p",{className:"text-sm text-purple-800",children:"âœ¨ AI will analyze your brief to identify assets, create detailed specifications, and suggest optimal supplier allocations with confidence scores."})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"physical_parameters",className:"flex items-center space-x-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:"Physical Parameters"})]}),e.jsx("input",{type:"text",id:"physical_parameters",name:"physical_parameters",value:s.physical_parameters,onChange:t,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Location, size, capacity, etc."})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"financial_parameters",className:"flex items-center space-x-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{children:"Budget"})]}),e.jsx("input",{type:"number",id:"financial_parameters",name:"financial_parameters",value:s.financial_parameters||"",onChange:t,min:"0",step:"0.01",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"timeline_deadline",className:"flex items-center space-x-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{children:"Deadline"})]}),e.jsx("input",{type:"date",id:"timeline_deadline",name:"timeline_deadline",value:s.timeline_deadline,onChange:t,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t",children:e.jsxs("button",{type:"submit",disabled:w,className:"flex items-center space-x-2 px-8 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsxs("span",{children:[n==="creating-project"&&"Creating Project...",n==="processing-brief"&&(i==="ai"?"AI Processing Brief...":"Processing Brief..."),n==="success"&&"Project Created!",n==="error"&&"Failed - Try Again",n==="idle"&&"Create Project"]})]})})]})]})})};export{G as default};
