import{c as o,r,j as e,U as u,M as S}from"./index-20u6XjU9.js";import{s as n}from"./supabase-DvtyvoWz.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],C=o("plus",k);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],E=o("square-pen",M);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],F=o("tag",A);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],D=o("trash-2",q),T=()=>{const[d,h]=r.useState([]),[g,l]=r.useState(!1),[c,m]=r.useState(null),[i,a]=r.useState({supplier_name:"",contact_email:"",service_categories:[]}),[y,v]=r.useState(!0),b=["Printing","Graphics","Banners","Staging","Audio","Lighting","Catering","Food","Beverages","Design","Branding","Marketing","Transport","Logistics","Delivery","Photography","Video","Security"];r.useEffect(()=>{p()},[]);const p=async()=>{try{const{data:s,error:t}=await n.from("suppliers").select("*").order("supplier_name");if(t)throw t;h(s||[])}catch(s){console.error("Error loading suppliers:",s)}finally{v(!1)}},j=async s=>{s.preventDefault();try{if(c){const{error:t}=await n.from("suppliers").update(i).eq("id",c.id);if(t)throw t;m(null)}else{const{error:t}=await n.from("suppliers").insert(i);if(t)throw t;l(!1)}a({supplier_name:"",contact_email:"",service_categories:[]}),await p()}catch(t){console.error("Error saving supplier:",t),alert("Failed to save supplier")}},f=s=>{a({supplier_name:s.supplier_name,contact_email:s.contact_email,service_categories:s.service_categories}),m(s),l(!0)},N=async s=>{if(confirm("Are you sure you want to delete this supplier?"))try{const{error:t}=await n.from("suppliers").delete().eq("id",s);if(t)throw t;await p()}catch(t){console.error("Error deleting supplier:",t),alert("Failed to delete supplier")}},_=s=>{a(t=>({...t,service_categories:t.service_categories.includes(s)?t.service_categories.filter(w=>w!==s):[...t.service_categories,s]}))},x=()=>{l(!1),m(null),a({supplier_name:"",contact_email:"",service_categories:[]})};return y?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Supplier Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your supplier network and categories"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Supplier"})]})]}),g&&e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:c?"Edit Supplier":"Add New Supplier"}),e.jsx("button",{onClick:x,className:"text-gray-500 hover:text-gray-700",children:"Ã—"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"supplier_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name *"}),e.jsx("input",{type:"text",id:"supplier_name",value:i.supplier_name,onChange:s=>a(t=>({...t,supplier_name:s.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contact_email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email *"}),e.jsx("input",{type:"email",id:"contact_email",value:i.contact_email,onChange:s=>a(t=>({...t,contact_email:s.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Categories"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:b.map(s=>e.jsx("button",{type:"button",onClick:()=>_(s),className:`px-3 py-2 text-sm rounded-lg border transition-colors ${i.service_categories.includes(s)?"bg-teal-100 border-teal-300 text-teal-700":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:s},s))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700",children:c?"Update Supplier":"Add Supplier"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"h-6 w-6 text-teal-600"}),e.jsxs("h2",{className:"text-xl font-semibold",children:["Active Suppliers (",d.length,")"]})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:d.map(s=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s.supplier_name}),e.jsxs("div",{className:"flex items-center space-x-1 text-gray-500",children:[e.jsx(S,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:s.contact_email})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-4 w-4 text-gray-400"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.service_categories.map(t=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:t},t))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>f(s),className:"p-2 text-gray-500 hover:text-teal-600 hover:bg-teal-50 rounded",title:"Edit Supplier",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>N(s.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete Supplier",children:e.jsx(D,{className:"h-4 w-4"})})]})]})},s.id))}),d.length===0&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(u,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No suppliers yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Add your first supplier to start managing your network"}),e.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700",children:"Add First Supplier"})]})]})]})};export{T as default};
