import{r as l,j as e,E as p,F as j,c as h,a as f}from"./index-Bj-tmwIw.js";import{s as N}from"./supabase-D_wOUl-A.js";import{C as y}from"./circle-x-nv1y8tp-.js";const v=()=>{const[i,n]=l.useState([]),[o,m]=l.useState(!0);l.useEffect(()=>{x()},[]);const x=async()=>{try{const{data:s,error:t}=await N.from("quotes").select("*, asset:assets(*, project:projects(*))").order("created_at",{ascending:!1});if(t)throw t;const r=(s||[]).map(a=>{var c;return{...a,project:(c=a.asset)==null?void 0:c.project}});n(r)}catch(s){console.error("Failed to load supplier quotes",s)}finally{m(!1)}},u=s=>{switch(s){case"Accepted":return e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Accepted"});case"Rejected":return e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Rejected"});case"Submitted":default:return e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Submitted"})}};return o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Quotes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View quotes you have submitted and their status"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:i.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(p,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No quotes yet"}),e.jsx("p",{className:"text-gray-600",children:"Use the Submit Quote page to add your first quote."})]}):e.jsx("div",{className:"divide-y",children:i.map(s=>{var t,r,a,c,d;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(j,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:((t=s.asset)==null?void 0:t.asset_name)||"Asset"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[(r=s.project)==null?void 0:r.project_name," ",(a=s.project)!=null&&a.client_name?`â€¢ ${(c=s.project)==null?void 0:c.client_name}`:""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[u(s.status),s.status==="Accepted"&&e.jsx(h,{className:"h-5 w-5 text-green-600"}),s.status==="Rejected"&&e.jsx(y,{className:"h-5 w-5 text-red-600"}),s.status==="Submitted"&&e.jsx(f,{className:"h-5 w-5 text-yellow-600"})]})]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Cost:"})," $",((d=s.cost)==null?void 0:d.toFixed(2))||"0.00"]}),s.notes_capacity&&e.jsxs("div",{className:"mt-1 text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Notes:"})," ",e.jsx("span",{className:"whitespace-pre-wrap",children:s.notes_capacity})]})]},s.id)})})})]})};export{v as default};
